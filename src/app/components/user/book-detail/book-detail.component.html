<div class="page-container" *ngIf="book$ | async as book">
  <div class="detail-card">
    <div class="book-media">
      <div class="cover-wrapper">
        <img [src]="book.coverImage" [alt]="book.title" class="book-cover">
      </div>
    </div>
    
    <div class="book-content">
      <div class="header">
        <span class="category-badge">{{book.category}}</span>
        <h1 class="title">{{book.title}}</h1>
        <p class="author">by <span class="author-name">{{book.author}}</span></p>
      </div>

      <div class="availability-section">
        <div class="status-indicator" [class.available]="book.availableCopies > 0" [class.unavailable]="book.availableCopies === 0">
          <span class="dot"></span>
          <span class="status-text">{{book.availableCopies > 0 ? 'Available' : 'Currently Unavailable'}}</span>
        </div>
        <p class="copies-info">{{book.availableCopies}} of {{book.totalCopies}} copies available</p>
      </div>

      <div class="description-section">
        <h3>Description</h3>
        <p class="description">{{book.description || 'No description available for this book.'}}</p>
      </div>

      <div class="actions-section">
        <button 
          *ngIf="book.availableCopies > 0" 
          (click)="borrowBook(book.id!)" 
          class="btn btn-primary btn-lg"
        >
          Borrow Book
        </button>
        
        <button 
          *ngIf="book.availableCopies === 0" 
          class="btn btn-secondary btn-lg"
          disabled
        >
          Join Waitlist
        </button>
        
        <button (click)="goBack()" class="btn btn-outline btn-lg">
          Back to Browse
        </button>
      </div>
    </div>
  </div>
</div>
